
<!-- ######## 右侧开始-->
<div class="app-body">

            <div id="modal-alert"></div>
            <div id="body-alert"></div>

            <!-- #####  右侧正文开始-->
            <div class="titlebar white box-shadow">
                <!-- <div class="l-h m-l pull-right pull-rightest">
                    <button class="btn btn-sm btn-tbw rounded primary" ng-click="back()">返回</button>
                </div> -->
                <div class="l-h m-r pull-right">
                    <button class="btn btn-sm btn-tbw rounded blueLt" id='saveButton' ng-click="save()">保存</button>
                </div>
                <div class="l-h m-r pull-right">
                    <button class="btn btn-sm btn-tbw rounded blueLt" ng-click="previewDayPlan()">预览日计划</button>
                </div>
                <div class="l-h m-r pull-right" ng-if="hasRoute!='Y'">
                    <button class="btn btn-sm btn-tbw rounded blueLt" ng-click="editDelivDate()">修改配送日期</button>
                </div>
                <div class="l-h m-r pull-right" ng-if="(orderDetail.order.paymentmethod == '20'&&orderDetail.order.milkboxStat != '20') || hasPlans=='Y'">
                    <button class="btn btn-sm btn-tbw rounded blueLt" ng-click="addProduct()">新增产品</button>
                </div>
                <div class="l-h m-r pull-right" ng-if="haveReceiptOrder">
                    <button class="btn btn-sm btn-tbw rounded danger" ng-click="delChargebill()" nh-mulclick-disable="chargebillDeling">删除收款单</button>
                </div>
            </div>
            <br><br>
            <!-- ###  表格开始-->
            <div class="box">
                <div class="box-body">

                    <div class="box-body">
                        <div class="row">
                            <div class="form-group col-md-1">
                                <strong>用户姓名</strong>
                            </div>
                            <div class="form-group col-md-2">
                                {{orderDetail.order.milkmemberName}}
                            </div>
                            <div class="form-group col-md-1">
                                <strong>联系电话</strong>
                            </div>
                            <div class="form-group col-md-2">
                                {{orderDetail.order.customerTel}}
                            </div>
                            <div class="form-group col-md-1">
                                <strong>送奶奶站</strong>
                            </div>
                            <div class="form-group col-md-2">
                                {{orderDetail.order.branchName}}
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-md-1">
                                <strong>付费方式</strong>
                            </div>
                            <div class="form-group col-md-2" ng-if="orderDetail.order.paymentmethod == '10' ">
                                后付款
                            </div>
                            <div class="form-group col-md-2" ng-if="orderDetail.order.paymentmethod == '20' ">
                                预付款
                            </div>
                            <div class="form-group col-md-2" ng-if="orderDetail.order.paymentmethod == '30' ">
                                垫付费
                            </div>
                            <div class="form-group col-md-1">
                                <strong>订单金额</strong>
                            </div>
                            <div class="form-group col-md-2">
                                ￥{{orderDetail.order.initAmt}}
                            </div>
                            <div class="form-group col-md-1">
                                <strong>账户余额</strong>
                            </div>
                            <div class="form-group col-md-2">
                                ￥{{orderDetail.account.acctAmt || 0}}
                            </div>
                        </div>
                        <div class="row" ng-if="orderDetail.order.paymentStat != '10' ">
                            <div class="form-group col-md-1">
                                <strong>收款类型</strong>
                            </div>
                            <div class="form-group col-md-2" >
                                <span ng-if="orderDetail.order.payMethod == '10' ">现金</span>
                                <span ng-if="orderDetail.order.payMethod == '20' ">网上转账</span>
                                <span ng-if="orderDetail.order.payMethod == '30' ">冲值卡</span>
                                <span ng-if="orderDetail.order.payMethod == '40' ">其他</span>
                            </div>
                            <div class="form-group col-md-1">
                                <strong>收款人</strong>
                            </div>
                            <div class="form-group col-md-2">
                                {{orderDetail.order.payMan}}
                            </div>
                            <div class="form-group col-md-1">
                                <strong>收款日期</strong>
                            </div>
                            <div class="form-group col-md-2" ng-bind-html="dateFormat2(orderDetail.order.payDate)">
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-md-1">
                                <strong>付款状态</strong>
                            </div>
                            <div class="form-group col-md-2" ng-if="orderDetail.order.paymentStat == '10' ">
                                未付款
                            </div>
                            <div class="form-group col-md-2" ng-if="orderDetail.order.paymentStat == '20' ">
                                已付款
                            </div>
                            <div class="form-group col-md-2" ng-if="orderDetail.order.paymentStat == '30' ">
                                垫付费
                            </div>
                            <div class="form-group col-md-1" ng-if="orderDetail.order.promotion">
                                <strong>整单促销</strong>
                            </div>
                            <div class="form-group col-md-2" ng-if="orderDetail.order.promotion">
                                {{orderDetail.order.promotion + orderDetail.order.promType + orderDetail.order.discountAmt}}
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-md-1">
                                <strong>备注</strong>
                            </div>
                           <div class="form-group col-md-4" ><textarea ng-model="orderDetail.order.memoTxt"  class="form-control"></textarea></div>
                        </div>
                    </div>

                    <hr>
                    <div class="box-body">
                        <div class="row">
                            <div class="form-group col-md-2">
                            <h5>送奶计划</h5>
                            </div>
                            <!-- <div class="form-group col-md-2" ng-if="orderDetail.order.paymentmethod == '10' ">
                                <strong>行项目日期是否作为有效期</strong>
                                <div>
                                    <label class="radio-inline md-check">
                                        <input type="radio" ng-click="changeEditType()" name="validDate" ng-model="orderDetail.order.validDate" value="Y">
                                        <i class="blue"></i>是
                                    </label>
                                    <label class="radio-inline md-check">
                                        <input type="radio" ng-click="changeEditType()" name="validDate" ng-model="orderDetail.order.validDate" value="N">
                                        <i class="blue"></i>否
                                    </label>
                                </div>
                            </div>
                            <div class="form-group col-md-2 col-md-offset-5" ng-if="orderDetail.order.paymentmethod == '10' && orderDetail.order.validDate=='Y' ">
                                <button class="btn btn-sm blueLt" ng-click="addProduct()">新增订奶计划</button>
                            </div> -->
                        </div>
                        <!-- 产品行项目 -->
                        <div class="row">
                            <div class="form-group col-md-10"><br>
                                
                                <div class="box" ng-repeat="entry in orderDetail.entries">
                                        <!-- <div ng-if="entry.promotion!=undefined&&entry.promotion!=''">
                                            <div class="box-header blueLt">
                                                <h4>
                                                <strong>
                                                    <span class="m-r-sm" ng-bind="entry.matnr.slice(-8)"></span>
                                                    <span class="m-r-sm" ng-bind="entry.matnrTxt"></span>
                                                    <span ng-bind="entry.qty"></span>{{entry.unit}}
                                                </strong>
                                                <div class="m-t-sm">（此行参加促销活动,不能长期计划,如需要请修改日计划）</div>
                                                </h4>
                                            </div>

                                            <div class="panel-collapse p-b">
                                                <div class="box-body">
                                                    <div class="row">
                                                       <div class="col-md-4 col-sm-4" ng-if="entry.gapDays!=undefined"> 
                                                            <strong>配送规律&nbsp&nbsp</strong>按周期送 间隔{{entry.gapDays}}天
                                                        </div>
                                                        <div class="col-md-4 col-sm-4" ng-if="entry.ruleType=='20'"> 
                                                            <strong>配送规律&nbsp&nbsp</strong>按星期送
                                                        </div>
                                                        <div class="col-md-4 col-sm-4" ng-if="entry.reachTimeType==10"> 
                                                            <strong>送奶时间&nbsp&nbsp</strong>上午配送
                                                        </div>
                                                        <div class="col-md-4 col-sm-4" ng-if="entry.reachTimeType==20"> 
                                                            <strong>送奶时间&nbsp&nbsp</strong>下午配送
                                                        </div>
                                                        <div class="col-md-1 col-sm-1"> 
                                                            <strong>送奶期限</strong>
                                                        </div>
                                                        <div class="col-md-3 col-sm-3" ng-bind-html="dateFormat(entry.startDispDate,entry.endDispDate)"> 
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div> -->
                                        <!-- ng-if="entry.promotion==undefined||entry.promotion==''" -->
                                        <div>
                                            <div class="box-header blueLt">
                                                <h4>
                                                <strong>
                                                    <span class="m-r-sm" ng-bind="entry.matnr.slice(-8)"></span>
                                                    <span class="m-r-sm" ng-bind="entry.matnrTxt"></span>
                                                    <span ng-bind="entry.qty"></span>{{entry.unit}}
                                                    <span class="m-l-sm" ng-bind="'(促销： ' + entry.promotion + entry.promotionDetail + ')'" ng-if="entry.promotion && entry.promotionDetail"></span>
                                                </strong>
                                                </h4>
                                            </div>

                                            <div class="panel-collapse p-b">
                                                <div class="box-body">
                                                    <br>
                                                    <div class="row text">
                                                        <!-- <div class="col-md-3">
                                                            <div class="b-b nav-active-bg">
                                                                <ul class="nav nav-tabs" ng-if="entry.ruleType=='10'">
                                                                    <li class="nav-item">
                                                                        <a class="nav-link active" data-target="#tab{{entry.itemNo}}a" data-toggle="tab" href="" aria-expanded="true"
                                                                        ng-click="changeDeliveryType(entry.itemNo,0)">按周期送
                                                                        </a>
                                                                    </li>
                                                                    <li class="nav-item">
                                                                        <a class="nav-link" data-target="#tab{{entry.itemNo}}b" data-toggle="tab" href="" aria-expanded="false"
                                                                        ng-click="changeDeliveryType(entry.itemNo,1)">按星期送
                                                                        </a>
                                                                    </li>
                                                                </ul>
                                                                <ul class="nav nav-tabs" ng-if="entry.ruleType=='20'">
                                                                    <li class="nav-item">
                                                                        <a class="nav-link" data-target="#tab{{entry.itemNo}}a" data-toggle="tab" href="" aria-expanded="true"
                                                                        ng-click="changeDeliveryType(entry.itemNo,0)">按周期送
                                                                        </a>
                                                                    </li>
                                                                    <li class="nav-item">
                                                                        <a class="nav-link active" data-target="#tab{{entry.itemNo}}b" data-toggle="tab" href="" aria-expanded="false"
                                                                        ng-click="changeDeliveryType(entry.itemNo,1)">按星期送
                                                                        </a>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                            <div class="form-group tab-content p-a m-b-md" style ="border:solid 2px black;" ng-if="entry.ruleType=='10'">
                                                                <div id="tab{{entry.itemNo}}a" class="tab-pane animated fadeIn text-muted active" aria-expanded="true">
                                                                    <div>
                                                                        间隔天数 &nbsp
                                                                        <input class="inline" type="number" ng-model="entry.gapDays" min=0>
                                                                    </div>
                                                                    
                                                                </div>
                                                                <div id="tab{{entry.itemNo}}b" class="tab-pane animated fadeIn text-muted" aria-expanded="false">
                                                                    <div class="row">
                                                                        <div class="col-md-6"><input name="{{entry.itemNo}}" type="checkbox" ng-model="entry.sendByWeeks.mon">&nbsp&nbsp周一</div>
                                                                        <div class="col-md-6"><input name="{{entry.itemNo}}" type="checkbox" ng-model="entry.sendByWeeks.tue">&nbsp&nbsp周二</div>
                                                                    </div>
                                                                    <br>
                                                                    <div class="row">
                                                                        <div class="col-md-6"><input name="{{entry.itemNo}}" type="checkbox" ng-model="entry.sendByWeeks.wed">&nbsp&nbsp周三</div>
                                                                        <div class="col-md-6"><input name="{{entry.itemNo}}" type="checkbox" ng-model="entry.sendByWeeks.tur">&nbsp&nbsp周四</div>
                                                                    </div>
                                                                    <br>
                                                                    <div class="row">
                                                                        <div class="col-md-6"><input name="{{entry.itemNo}}" type="checkbox" ng-model="entry.sendByWeeks.fri">&nbsp&nbsp周五</div>
                                                                        <div class="col-md-6"><input name="{{entry.itemNo}}" type="checkbox" ng-model="entry.sendByWeeks.sat">&nbsp&nbsp周六</div>
                                                                    </div>
                                                                    <br>
                                                                    <div class="row">
                                                                        <div class="col-md-6"><input name="{{entry.itemNo}}" type="checkbox" ng-model="entry.sendByWeeks.sun">&nbsp&nbsp周日</div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="form-group tab-content p-a m-b-md" style ="border:solid 2px black;" ng-if="entry.ruleType=='20'">
                                                                <div id="tab{{entry.itemNo}}a" class="tab-pane animated fadeIn text-muted" aria-expanded="true">
                                                                    <div>
                                                                        间隔天数 &nbsp
                                                                        <input class="inline" type="number" ng-model="entry.gapDays" min=0>
                                                                    </div>
                                                                    
                                                                </div>
                                                                <div id="tab{{entry.itemNo}}b" class="tab-pane animated fadeIn text-muted active" aria-expanded="false">
                                                                    <div class="row">
                                                                        <div class="col-md-6"><input name="{{entry.itemNo}}" type="checkbox" ng-model="entry.sendByWeeks.mon">&nbsp&nbsp周一</div>
                                                                        <div class="col-md-6"><input name="{{entry.itemNo}}" type="checkbox" ng-model="entry.sendByWeeks.tue">&nbsp&nbsp周二</div>
                                                                    </div>
                                                                    <br>
                                                                    <div class="row">
                                                                        <div class="col-md-6"><input name="{{entry.itemNo}}" type="checkbox" ng-model="entry.sendByWeeks.wed">&nbsp&nbsp周三</div>
                                                                        <div class="col-md-6"><input name="{{entry.itemNo}}" type="checkbox" ng-model="entry.sendByWeeks.tur">&nbsp&nbsp周四</div>
                                                                    </div>
                                                                    <br>
                                                                    <div class="row">
                                                                        <div class="col-md-6"><input name="{{entry.itemNo}}" type="checkbox" ng-model="entry.sendByWeeks.fri">&nbsp&nbsp周五</div>
                                                                        <div class="col-md-6"><input name="{{entry.itemNo}}" type="checkbox" ng-model="entry.sendByWeeks.sat">&nbsp&nbsp周六</div>
                                                                    </div>
                                                                    <br>
                                                                    <div class="row">
                                                                        <div class="col-md-6"><input name="{{entry.itemNo}}" type="checkbox" ng-model="entry.sendByWeeks.sun">&nbsp&nbsp周日</div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div> -->
                                                        <div class="col-md-4 col-sm-4" ng-if="entry.ruleType=='10'"> 
                                                            <strong>配送规律&nbsp&nbsp</strong>按周期送 间隔
                                                            <span ng-bind="entry.gapDays"></span>天
                                                        </div>
                                                        <div class="col-md-4 col-sm-4" ng-if="entry.ruleType=='20'"> 
                                                            <strong>配送规律&nbsp&nbsp</strong>按星期送
                                                            <span ng-bind="entry.ruleTxt"></span>
                                                        </div>
                                                        <div class="col-md-4 col-sm-4" ng-if="entry.reachTimeType==10"> 
                                                            <strong>送奶时间&nbsp&nbsp</strong>上午配送
                                                        </div>
                                                        <div class="col-md-4 col-sm-4" ng-if="entry.reachTimeType==20"> 
                                                            <strong>送奶时间&nbsp&nbsp</strong>下午配送
                                                        </div>
                                                        <div class="col-md-4 col-sm-4"> 
                                                            <strong>送奶期限&nbsp&nbsp</strong>{{entry.startDispDate}}至{{entry.endDispDate}}
                                                        </div>

                                                        <div class="col-md-4 col-sm-4" ng-if="entry.stopStartDate!=null && entry.stopEndDate!=null"> 
                                                            <strong>停订区间&nbsp&nbsp</strong>{{entry.stopStartDate}}至{{entry.stopEndDate}}
                                                        </div>


                                                        <div class="col-md-4 col-sm-4" ng-if="entry.isStop=='Y'"> 
                                                            该行项目不再参与订单续订
                                                        </div>
                                                        <div class="form-group col-md-4" ng-if="orderDetail.order.paymentStat=='10' && orderDetail.order.paymentmethod == '20' && entry.newFlag=='Y'">
                                                                <label>促销信息<p class="small inline m-l">选填</p></label>
                                                                <ui-select ng-click="getPromotions(entry.matnr)" ng-model="entry.promotion" search-enabled="false">
                                                                    <ui-select-match allow-clear="true" placeholder="请选择">
                                                                        <span ng-bind="'满'+$select.selected.orgQty+'个赠送'+$select.selected.giftQty+'个产品'+$select.selected.giftMatnr"></span>
                                                                    </ui-select-match>
                                                                    <ui-select-choices 
                                                                    repeat="x.promNo as x in (promotions | filter: $select.search) track by x.promNo">
                                                                        <span ng-bind="'满'+x.orgQty+'个赠送'+x.giftQty+'个产品'+x.giftMatnr"></span>
                                                                    </ui-select-choices>
                                                                </ui-select>
                                                        </div>
                                                        <!-- <div class="col-md-9">
                                                                <div class="row">
                                                                    <div class="form-group col-md-4">
                                                                        <label for="orderDate">起始日期<p class="small inline m-l">必填</p></label>
                                                                        <div class="select-date">
                                                                            <input type="text" class="form-control"
                                                                               ng-model="entry.startDispDate"
                                                                               data-min-date="{{defaultValue.date}}"
                                                                               data-max-date="{{entry.endDispDate}}"
                                                                               name="startDate"
                                                                               bs-datepicker>
                                                                            <i class="material-icons md-24">&#xe8df;</i>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group col-md-4" ng-if="orderDetail.order.paymentmethod == '10' && !entry.isDeleted && !entry.deletePlans">
                                                                        <label for="orderDate">结束日期<p class="small inline m-l">必填</p></label>
                                                                        <div class="select-date">
                                                                            <input type="text" class="form-control"
                                                                               ng-model="entry.endDispDate"
                                                                               data-min-date="{{entry.startDispDate}}"
                                                                               name="endDate"
                                                                               bs-datepicker>
                                                                            <i class="material-icons md-24">&#xe8df;</i>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group col-md-4" ng-if="orderDetail.order.paymentmethod == '10' && entry.newFlag=='Y'">
                                                                        <label for="orderDate">开始配送日期<p class="small inline m-l">必填</p></label>
                                                                        <div class="select-date">
                                                                            <input type="text" class="form-control"
                                                                               ng-model="entry.startDate"
                                                                               data-min-date="{{entry.startDispDate}}"
                                                                               data-max-date="{{entry.endDispDate}}"
                                                                               name="stDate"
                                                                               bs-datepicker>
                                                                            <i class="material-icons md-24">&#xe8df;</i>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="form-group col-md-4">
                                                                        <label for="">送奶时间<p class="small inline m-l">必填</p></label>
                                                                        <ui-select ng-model="entry.reachTimeType" remove-selected="false" search-enabled="false">
                                                                            <ui-select-match allow-clear="false" placeholder="请选择送奶时间">
                                                                                <span ng-bind="$select.selected.text"></span>
                                                                            </ui-select-match>
                                                                            <ui-select-choices repeat="x.code as x in (deliveryTime.data | filter: $select.search) track by x.code">
                                                                                <span ng-bind="x.text"></span>
                                                                            </ui-select-choices>
                                                                        </ui-select>
                                                                    </div>
                                                                    <div class="form-group col-md-4">
                                                                        <label for="">数量<p class="small inline m-l">必填</p></label>
                                                                        <input class="form-control" ng-model="entry.qty" type="number" min="1">
                                                                    </div>
                                                                </div>
                                                        </div> -->
                                                    </div>
                                                    <hr>
                                                    <div class="row">
                                                        <!-- <div class="col-md-4" ng-if="entry.newFlag !='Y'&&orderDetail.order.validDate=='Y' ">
                                                            <div class="col-md-6"><input type="checkbox" ng-model="entry.isDeleted">&nbsp删除此行</div>
                                                            <div class="col-md-6"><input type="checkbox" ng-model="entry.deletePlans">&nbsp从起始日期删除日计划</div>
                                                        </div> -->
                                                        <div class="col-md-6 col-md-offset-6 text _600">
                                                            每日配送：{{entry.qty}}{{entry.unit}},&nbsp&nbsp每日总价：￥{{10000*entry.salesPrice*entry.qty/10000}}
                                                            <!-- <button class="btn btn-sm blueLt" ng-click="editProduct(entry.itemNo)">变更品种</button>
                                                            <button class="btn btn-sm blueLt" ng-if="orderDetail.order.validDate !='Y'|| entry.newFlag == 'Y' " ng-click="removeProduct(entry.itemNo)">删除</button> -->
                                                        </div>
                                                    </div>
                                                    <div class="row m-t">
                                                        <div class="col-md-6 col-md-offset-6">
                                                            <button ng-if="entry.promotion==undefined||entry.promotion==''" class="btn blueLt m-r-sm" ng-click="editProduct(entry.itemNo, $index)">变更品种</button>
                                                            <button ng-if="entry.promotion==undefined||entry.promotion==''||entry.newFlag=='Y'" class="btn blueLt m-r-sm" ng-click="editQty(entry.itemNo, $index)">变更数量</button>
                                                            <button ng-if="entry.promotion==undefined||entry.promotion==''||entry.newFlag=='Y'" class="btn blueLt m-r-sm" ng-click="editDelivery(entry.itemNo, $index)">变更配送规律</button>
                                                            <button ng-if="entry.newFlag!='Y'&&hasPlans=='Y'&&(orderDetail.entries.length>1||!hideStopFlag)" class="btn blueLt m-r-sm" ng-click="stopOrder(entry.itemNo, $index)">停订</button>
                                                            <button class="btn blueLt m-r-sm" ng-click="removeProduct(entry.itemNo, $index)">删除</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                </div>  

                            </div>
                        </div>   
                    </div>

                    <hr>
                    <div class="box-body">
                        <div class="row">
                            <h5>配送地址</h5>
                        </div>
                        <!-- 产品行项目 -->
                        
                        <div class="row">
                            <div class="form-group col-md-10" style ="border:solid 3px black;" ><br>
                                <div class="row col-md-offset-1">
                                    <div class="row" >
                                        <div class="col-md-4 col-sm-4"> 
                                            <strong>收货人&nbsp&nbsp</strong>
                                            <span ng-bind="orderDetail.address.recvName"></span>
                                        </div>
                                        <div class="col-md-8 col-sm-8"> 
                                            <strong>地址&nbsp&nbsp</strong>
                                            <span ng-bind="orderDetail.address.province+orderDetail.address.city+orderDetail.address.county+orderDetail.address.residentialArea+orderDetail.address.addressTxt"></span>
                                        </div>
                                    </div><br>
                                    <div class="row">
                                       <div class="col-md-4 col-sm-4"> 
                                            <strong>奶站&nbsp&nbsp</strong> {{orderDetail.order.branchName}}
                                        </div>
                                        <div class="col-md-4 col-sm-4"> 
                                            <strong>联系电话&nbsp&nbsp</strong>  {{orderDetail.address.mp}}
                                        </div>
                                        <div class="col-md-4 col-sm-4" ng-if="orderDetail.order.milkboxStat == '10' "> 
                                            <strong >奶箱&nbsp&nbsp</strong> 已安装
                                        </div>
                                        <div class="col-md-4 col-sm-4" ng-if="orderDetail.order.milkboxStat == '20' "> 
                                            <strong >奶箱&nbsp&nbsp</strong> 未安装
                                        </div>
                                        <div class="col-md-4 col-sm-4" ng-if="orderDetail.order.milkboxStat == '30' "> 
                                            <strong >奶箱&nbsp&nbsp</strong> 无需安装
                                        </div>
                                    </div><br>
                                </div>
                            </div>
                        </div>
                    </div> 

                    <hr>
                    <div class="box-body">
                        <div class="row">
                            <h5>配送信息</h5>
                        </div>
                        <div class="row">
                            <div class="form-group col-md-10"><br>
                                <div class="row col-md-offset-1">
                                    <div class="row" >
                                        <div class="col-md-4 col-sm-4"> 
                                            <strong>送奶员&nbsp&nbsp</strong>
                                            <span ng-bind="orderDetail.order.empName"></span>
                                        </div>
                                        <div class="col-md-4 col-sm-4"> 
                                            <strong>创建人&nbsp&nbsp</strong>
                                            <span ng-bind="orderDetail.entries[0].createByTxt"></span>
                                        </div>
                                        <div class="col-md-4 col-sm-4"> 
                                            <strong>创建时间&nbsp&nbsp</strong>
                                            <span ng-bind="dateFormat2(orderDetail.entries[0].createAt)"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>   
                    </div>   
                                        
                </div>
                

            </div>

            <!-- ###  表格结束-->
            <!--productdetail modal -->
            <script type="text/ng-template" id="addProductModal.html">
                  <div class="modal-header blueLt">
                        <h3 class="modal-title">新增计划</h3>
                  </div>
                  <div class="modal-body p-lg">
                    <div class="box-body">
                        <div class="row m-b">
                            <div class="col-md-4" style="line-height: 2.4rem;">
                                您选择了：{{newEntry.shortTxt}}
                            </div>
                            <div class="col-md-7">
                                有效日期：
                                <div class="select-date" style="width: 35%;display: inline-block;">
                                    <input type="text" class="form-control"
                                       ng-model="startDate"
                                       data-min-date="{{today}}"
                                       data-max-date="{{endDate}}"
                                       data-autoclose="true" 
                                       data-date-format="yyyy-MM-dd"
                                       data-date-type="string"
                                       bs-datepicker>
                                    <i class="material-icons md-24">&#xe8df;</i>
                                </div>
                                <span>到</span>
                                <div class="select-date" style="width: 35%;display: inline-block;">
                                    <input type="text" class="form-control"
                                       ng-model="endDate"
                                       data-min-date="{{startDate}}"
                                       data-autoclose="true"
                                       data-date-format="yyyy-MM-dd"
                                       data-date-type="string"
                                       bs-datepicker>
                                    <i class="material-icons md-24">&#xe8df;</i>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-3">
                                <input id="productId" type="text" ng-model="matnrTxt" class="form-control" placeholder="搜索商品编码或名称">
                                
                            </div>
                            <div class="col-md-1">
                                <button class="btn blueLt" ng-click="reloadTable()">搜索</button>
                            </div>
                        </div>

                        <div class="box" style="border-radius: 2px;">
                            <div class="row">
                                <div class="col-sm-12">
                                    <table class="table table-striped b-b no-footer">
                                        <thead>
                                            <tr role="row">
                                                <th class="th-nh" style="border-top-width: 0;">商品编码</th>
                                                <th class="th-nh" style="border-top-width: 0;">商品名称</th>
                                                <th class="th-nh" style="border-top-width: 0;">操作</th>
                                            </tr>
                                        </thead>
                                            <tbody>
                                                <tr ng-show="content.length <= 0"><td colspan="6" style="text-align:center;">Loading new data!!</td></tr>
                                                <tr id="productRow" current-page="curPageno" pagination-id="order_addproduct" dir-paginate="user in content|itemsPerPage:itemsPerPage" total-items="total_count">
                                                    <td class="td-id-nh" id="productId">
                                                        {{user.matnr.slice(-8)}}
                                                    </td>
                                                    <td id="productName">{{user.maraEx.shortTxt}}</td>
                                                    <td>
                                                        <div class="btn-groups">
                                                            <button ng-click="chooseProduct(user.matnr,user.matnrTxt,user.maraEx.shortTxt,user.zbotCodeName)" class="btn btn-xs btn-outline rounded b-primary text-primary">确认</button>
                                                        </div>
                                                    </td>                         
                                                </tr>
                                            </tbody>
                                    </table>  
                                    <footer class="text-center">
                                                <dir-pagination-controls pagination-id="order_addproduct"
                                                    max-size="5"
                                                    direction-links="true"
                                                    boundary-links="true" 
                                                    on-page-change="getData(newPageNumber)"
                                                    template-url="nhtpl/pagination.tpl.html">
                                                </dir-pagination-controls>
                                    </footer>  
                                </div>
                            </div>
                        </div>
                    </div>
                  </div>
                  <div class="modal-footer">
                        <button type="button" class="btn blueLt p-x-md" ng-click="save()">确认添加</button>
                        <button type="button" class="btn dark-white p-x-md" ng-click="cancelModal()">关闭</button>
                  </div>
            </script>
            <!-- modal end -->
            <!--productOrgdetail modal -->
            <script type="text/ng-template" id="addProductOrgModal.html">
                  <div class="modal-header blueLt">
                        <h3 class="modal-title">新增计划</h3>
                  </div>
                  <div class="modal-body p-lg">
                    <div class="box-body">
                        <div class="row m-b">
                            <div class="col-md-4" style="line-height: 2.4rem;">
                                您选择了：{{newEntry.shortTxt}}
                            </div>
                            <div class="col-md-7">
                                有效日期：
                                <div class="select-date" style="width: 35%;display: inline-block;">
                                    <input type="text" class="form-control"
                                       ng-model="startDate"
                                       data-min-date="{{today}}"
                                       data-max-date="{{endDate}}"
                                       data-autoclose="true" 
                                       data-date-format="yyyy-MM-dd"
                                       data-date-type="string"
                                       bs-datepicker>
                                    <i class="material-icons md-24">&#xe8df;</i>
                                </div>
                                <span>到</span>
                                <div class="select-date" style="width: 35%;display: inline-block;">
                                    <input type="text" class="form-control"
                                       ng-model="endDate"
                                       data-min-date="{{startDate}}"
                                       data-autoclose="true"
                                       data-date-format="yyyy-MM-dd"
                                       data-date-type="string"
                                       bs-datepicker>
                                    <i class="material-icons md-24">&#xe8df;</i>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-3">
                                <input id="productId" type="text" ng-model="matnrTxt" class="form-control" placeholder="搜索商品编码或名称">
                                
                            </div>
                            
                            <div class="col-md-1">
                                <button class="btn blueLt" ng-click="reloadTable()">搜索</button>
                            </div>
                            <div class="col-md-6">
                                <label class="radio-inline md-check m-t-sm">是否执行旧价格:</label>
                                
                               <label class="radio-inline md-check m-t-sm">
                                            <input type="radio" id="id"  value='Y' ng-model="isold"> <i class="primary"></i>
                                            是
                                        </label>
                                        <label class="radio-inline md-check m-t-sm">
                                            <input type="radio" id="id" value='N' ng-model="isold"> <i class="primary"></i>
                                            否
                                        </label>
                                
                            </div>
                        </div>
                        
                        <div class="box" style="border-radius: 2px;">
                            <div class="row">
                                <div class="col-sm-12">
                                    <table class="table table-striped b-b no-footer">
                                        <thead>
                                            <tr role="row">
                                                <th class="th-nh" style="border-top-width: 0;">商品编码</th>
                                                <th class="th-nh" style="border-top-width: 0;">商品名称</th>
                                                <th class="th-nh" style="border-top-width: 0;">商品价格</th>
                                                <th class="th-nh" style="border-top-width: 0;">商品原价</th>
                                                <th class="th-nh" style="border-top-width: 0;">操作</th>
                                            </tr>
                                        </thead>
                                            <tbody>
                                                <tr ng-show="content.length <= 0"><td colspan="6" style="text-align:center;">Loading new data!!</td></tr>
                                                <tr id="productRow" current-page="curPageno" pagination-id="order_addproduct" dir-paginate="user in content|itemsPerPage:itemsPerPage" total-items="total_count">
                                                    <td class="td-id-nh" id="productId">
                                                        {{user.matnr.slice(-8)}}
                                                    </td>
                                                    <td id="productName">{{user.matnrTxt}}</td>
                                                    <td id="productName">{{user.priceAgree}}</td>
                                                    <td id="productName">{{user.oldPrice}}</td>
                                                    <td>
                                                        <div class="btn-groups">
                                                            <button ng-click="chooseProduct(user.matnr,user.matnrTxt,user.priceAgree,user.oldPrice,user)" class="btn btn-xs btn-outline rounded b-primary text-primary">确认</button>
                                                        </div>
                                                    </td>                         
                                                </tr>
                                            </tbody>
                                    </table>  
                                    <footer class="text-center">
                                                <dir-pagination-controls pagination-id="order_addproduct"
                                                    max-size="5"
                                                    direction-links="true"
                                                    boundary-links="true" 
                                                    on-page-change="getData(newPageNumber)"
                                                    template-url="nhtpl/pagination.tpl.html">
                                                </dir-pagination-controls>
                                    </footer>  
                                </div>
                            </div>
                        </div>
                    </div>
                  </div>
                  <div class="modal-footer">
                        <button type="button" class="btn blueLt p-x-md" ng-click="save()">确认添加</button>
                        <button type="button" class="btn dark-white p-x-md" ng-click="cancelModal()">关闭</button>
                  </div>
            </script>
            <!-- modal end -->

            <!--productYearcarddetail modal -->
            <script type="text/ng-template" id="addProductYearcardModal.html">
                  <div class="modal-header blueLt">
                        <h3 class="modal-title">新增计划</h3>
                  </div>
                  <div class="modal-body p-lg">
                    <div class="box-body">
                        <div class="row m-b">
                            <div class="col-md-4" style="line-height: 2.4rem;">
                                您选择了：{{newEntry.shortTxt}}
                            </div>
                            <div class="col-md-7">
                                有效日期：
                                <div class="select-date" style="width: 35%;display: inline-block;">
                                    <input type="text" class="form-control"
                                       ng-model="startDate"
                                       data-min-date="{{today}}"
                                       data-max-date="{{endDate}}"
                                       data-autoclose="true" 
                                       data-date-format="yyyy-MM-dd"
                                       data-date-type="string"
                                       bs-datepicker>
                                    <i class="material-icons md-24">&#xe8df;</i>
                                </div>
                                <span>到</span>
                                <div class="select-date" style="width: 35%;display: inline-block;">
                                    <input type="text" class="form-control"
                                       ng-model="endDate"
                                       data-min-date="{{startDate}}"
                                       data-autoclose="true"
                                       data-date-format="yyyy-MM-dd"
                                       data-date-type="string"
                                       bs-datepicker>
                                    <i class="material-icons md-24">&#xe8df;</i>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-3">
                                <input id="productId" type="text" ng-model="matnrTxt" class="form-control" placeholder="搜索商品编码或名称">
                                
                            </div>
                            
                            <div class="col-md-1">
                                <button class="btn blueLt" ng-click="reloadTable()">搜索</button>
                            </div>
                            <div class="col-md-6">
                                <label class="radio-inline md-check m-t-sm">是否执行旧价格:</label>
                                
                               <label class="radio-inline md-check m-t-sm">
                                            <input type="radio" id="id"  value='Y' ng-model="isold"> <i class="primary"></i>
                                            是
                                        </label>
                                        <label class="radio-inline md-check m-t-sm">
                                            <input type="radio" id="id" value='N' ng-model="isold"> <i class="primary"></i>
                                            否
                                        </label>
                                
                            </div>
                        </div>
                        
                        <div class="box" style="border-radius: 2px;">
                            <div class="row">
                                <div class="col-sm-12">
                                    <table class="table table-striped b-b no-footer">
                                        <thead>
                                            <tr role="row">
                                                <th class="th-nh" style="border-top-width: 0;">商品编码</th>
                                                <th class="th-nh" style="border-top-width: 0;">商品名称</th>
                                                <th class="th-nh" style="border-top-width: 0;">商品价格</th>
                                                <th class="th-nh" style="border-top-width: 0;">商品原价</th>
                                                <th class="th-nh" style="border-top-width: 0;">操作</th>
                                            </tr>
                                        </thead>
                                            <tbody>
                                                <tr ng-show="content.length <= 0"><td colspan="6" style="text-align:center;">Loading new data!!</td></tr>
                                                <tr id="productRow" current-page="curPageno" pagination-id="order_addproduct" dir-paginate="user in content|itemsPerPage:itemsPerPage" total-items="total_count">
                                                    <td class="td-id-nh" id="productId">
                                                        {{user.matnr.slice(-8)}}
                                                    </td>
                                                    <td id="productName">{{user.matnrTxt}}</td>
                                                    <td id="productName">{{user.priceAgree}}</td>
                                                    <td id="productName">{{user.oldPrice}}</td>
                                                    <td>
                                                        <div class="btn-groups">
                                                            <button ng-click="chooseProduct(user.matnr,user.matnrTxt,user.priceAgree,user.oldPrice,user)" class="btn btn-xs btn-outline rounded b-primary text-primary">确认</button>
                                                        </div>
                                                    </td>                         
                                                </tr>
                                            </tbody>
                                    </table>  
                                    <footer class="text-center">
                                                <dir-pagination-controls pagination-id="order_addproduct"
                                                    max-size="5"
                                                    direction-links="true"
                                                    boundary-links="true" 
                                                    on-page-change="getData(newPageNumber)"
                                                    template-url="nhtpl/pagination.tpl.html">
                                                </dir-pagination-controls>
                                    </footer>  
                                </div>
                            </div>
                        </div>
                    </div>
                  </div>
                  <div class="modal-footer">
                        <button type="button" class="btn blueLt p-x-md" ng-click="save()">确认添加</button>
                        <button type="button" class="btn dark-white p-x-md" ng-click="cancelModal()">关闭</button>
                  </div>
            </script>
            <!-- modal end -->

            <!--productdetail modal -->
            <script type="text/ng-template" id="editProductModal.html">
                  <div class="modal-header blueLt">
                        <h3 class="modal-title">修改商品</h3>
                  </div>
                  <div class="modal-body p-lg">
                    <div class="box-body">
                        <div class="row m-b">
                            <div class="col-md-4" style="line-height: 2.4rem;">
                                替换商品：{{replaceProduct.product.shortTxt}}
                            </div>
                            <div class="col-md-7">
                                有效日期：
                                <div class="select-date" style="width: 35%;display: inline-block;">
                                    <input type="text" class="form-control"
                                       ng-model="prodInfo.startDispDate"
                                       data-min-date="{{startDate}}"
                                       data-max-date="{{endDate}}"
                                       data-autoclose="true" 
                                       data-date-format="yyyy-MM-dd"
                                       data-date-type="string"
                                       bs-datepicker>
                                    <i class="material-icons md-24">&#xe8df;</i>
                                </div>
                                <span>到</span>
                                <div class="select-date" style="width: 35%;display: inline-block;">
                                    <input ng-disabled="orderDetail.order.paymentmethod == '20'" type="text" class="form-control"
                                       ng-model="prodInfo.endDispDate"
                                       data-min-date="{{startDate}}"
                                       data-max-date="{{endDate}}"
                                       data-autoclose="true"
                                       data-date-format="yyyy-MM-dd"
                                       data-date-type="string"
                                       bs-datepicker>
                                    <i class="material-icons md-24">&#xe8df;</i>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-3">
                                <input id="productId" type="text" ng-model="matnrTxt" class="form-control" placeholder="搜索商品编码或名称">
                                
                            </div>
                            <div class="col-md-1">
                                <button class="btn blueLt" ng-click="reloadProductTable()">搜索</button>
                            </div>
                        </div>
                        <div class="row">
                            <div class="box" style="border-radius: 2px;">
                                <div class="row">
                                    <div class="col-sm-12">
                                        <table class="table table-striped b-b no-footer text-left">
                                            <thead>
                                                <tr role="row">
                                                    <th class="th-nh" style="border-top-width: 0;">商品编码</th>
                                                    <th class="th-nh" style="border-top-width: 0;">商品简称</th>
                                                    <th class="th-nh" style="border-top-width: 0;">数量</th>
                                                    <th class="th-nh" style="border-top-width: 0;">操作</th>
                                                </tr>
                                            </thead>
                                                <tbody>
                                                    <tr ng-show="content.length <= 0"><td colspan="6" style="text-align:center;">Loading new data!!</td></tr>
                                                    <tr id="productRow" current-page="curPageno" pagination-id="order_editproduct" dir-paginate="user in content|itemsPerPage:itemsPerPage" total-items="total_count">
                                                        <td class="td-id-nh">
                                                            {{user.matnr.slice(-8)}}
                                                        </td>
                                                        <td class="td-id-nh" id="productId" hidden>
                                                            {{user.matnr}}
                                                        </td>
                                                        <td id="productShortName">{{user.maraEx.shortTxt}}</td>
                                                        <td id="productName" hidden>{{user.matnrTxt}}</td>
                                                        <td><input id="productCount" class="form-control" style="width:130px" placeholder="请选择数量" type="number" min="1"></td>
                                                        <td>
                                                            <div class="btn-groups">
                                                                <button bottype="{{user.zbotCodeName.slice(-1)}}" editorderproduct-directive class="btn btn-xs btn-outline rounded b-primary text-primary">确认</button>
                                                            </div>

                                                        </td>                         
                                                    </tr>
                                                </tbody>
                                        </table>  
                                        <footer class="text-center">
                                                    <dir-pagination-controls pagination-id="order_editproduct"
                                                        max-size="5"
                                                        direction-links="true"
                                                        boundary-links="true" 
                                                        on-page-change="getData(newPageNumber)"
                                                        template-url="nhtpl/pagination.tpl.html">
                                                    </dir-pagination-controls>
                                        </footer>  
                                    </div>
                                </div>
                            </div>
                        </div>
                            
                    </div>
                  </div>
                  <div class="modal-footer">
                        <button type="button" class="btn blueLt p-x-md" ng-click="save()">确认修改</button>
                        <button type="button" class="btn dark-white p-x-md" ng-click="cancelModal()">关闭</button>
                  </div>
            </script>
            <!-- modal end -->
            <!--editOrgproductdetail modal -->
            <script type="text/ng-template" id="editOrgProductModal.html">
                  <div class="modal-header blueLt">
                        <h3 class="modal-title">修改商品</h3>
                  </div>
                  <div class="modal-body p-lg">
                    <div class="box-body">
                        <div class="row m-b">
                            <div class="col-md-4" style="line-height: 2.4rem;">
                                替换商品：<span ng-bind="replaceProduct.product.shortTxt"></span>
                            </div>
                            <div class="col-md-7">
                                有效日期：
                                <div class="select-date" style="width: 35%;display: inline-block;">
                                    <input type="text" class="form-control"
                                       ng-model="prodInfo.startDispDate"
                                       data-min-date="{{startDate}}"
                                       data-max-date="{{endDate}}"
                                       data-autoclose="true" 
                                       data-date-format="yyyy-MM-dd"
                                       data-date-type="string"
                                       bs-datepicker>
                                    <i class="material-icons md-24">&#xe8df;</i>
                                </div>
                                <span>到</span>
                                <div class="select-date" style="width: 35%;display: inline-block;">
                                    <input ng-disabled="orderDetail.order.paymentmethod == '20'" type="text" class="form-control"
                                       ng-model="prodInfo.endDispDate"
                                       data-min-date="{{startDate}}"
                                       data-max-date="{{endDate}}"
                                       data-autoclose="true"
                                       data-date-format="yyyy-MM-dd"
                                       data-date-type="string"
                                       bs-datepicker>
                                    <i class="material-icons md-24">&#xe8df;</i>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-3">
                                <input id="productId" type="text" ng-model="matnrTxt" class="form-control" placeholder="搜索商品编码或名称">
                                
                            </div>
                            <div class="col-md-1">
                                <button class="btn blueLt" ng-click="reloadProductTable()">搜索</button>
                            </div>
                             <div class="col-md-6">
                                <label class="radio-inline md-check m-t-sm">是否执行旧价格:</label>
                                
                               <label class="radio-inline md-check m-t-sm">
                                            <input type="radio" id="id"  value='Y' ng-model="isold"> <i class="primary"></i>
                                            是
                                        </label>
                                        <label class="radio-inline md-check m-t-sm">
                                            <input type="radio" id="id" value='N' ng-model="isold"> <i class="primary"></i>
                                            否
                                        </label>
                                
                            </div>
                        </div>
                        <div class="row">
                            <div class="box" style="border-radius: 2px;">
                                <div class="row">
                                    <div class="col-sm-12">
                                        <table class="table table-striped b-b no-footer text-left">
                                            <thead>
                                                <tr role="row">
                                                    <th class="th-nh" style="border-top-width: 0;">商品编码</th>
                                                    <th class="th-nh" style="border-top-width: 0;">商品简称</th>
                                                    <th class="th-nh" style="border-top-width: 0;">商品价格</th>
                                                    <th class="th-nh" style="border-top-width: 0;">商品原价</th>
                                                    <th class="th-nh" style="border-top-width: 0;">数量</th>
                                                    <th class="th-nh" style="border-top-width: 0;">操作</th>
                                                </tr>
                                            </thead>
                                                <tbody>
                                                    <tr ng-show="content.length <= 0"><td colspan="6" style="text-align:center;">Loading new data!!</td></tr>
                                                    <tr id="productRow" current-page="curPageno" pagination-id="order_editproduct" dir-paginate="user in content|itemsPerPage:itemsPerPage" total-items="total_count">
                                                        <td class="td-id-nh">
                                                            {{user.matnr.slice(-8)}}
                                                        </td>
                                                        <td class="td-id-nh" id="productId" hidden>
                                                            {{user.matnr}}
                                                        </td>
                                                        <td id="productShortName">{{user.matnrTxt}}</td>
                                                         <td id="productPriceAgree">{{user.priceAgree}}</td>
                                                          <td id="productOldPrice">{{user.oldPrice}}</td>
                                                        <td id="productName" hidden>{{user.matnrTxt}}</td>
                                                        <td><input id="productCount" class="form-control" style="width:130px" placeholder="请选择数量" type="number" min="1"></td>
                                                        <td>
                                                            <div class="btn-groups">
                                                                <button bottype="{{user.zbotCodeName.slice(-1)}}" editorderproduct-directive class="btn btn-xs btn-outline rounded b-primary text-primary">确认</button>
                                                            </div>

                                                        </td>                         
                                                    </tr>
                                                </tbody>
                                        </table>  
                                        <footer class="text-center">
                                                    <dir-pagination-controls pagination-id="order_editproduct"
                                                        max-size="5"
                                                        direction-links="true"
                                                        boundary-links="true" 
                                                        on-page-change="getData(newPageNumber)"
                                                        template-url="nhtpl/pagination.tpl.html">
                                                    </dir-pagination-controls>
                                        </footer>  
                                    </div>
                                </div>
                            </div>
                        </div>
                            
                    </div>
                  </div>
                  <div class="modal-footer">
                        <button type="button" class="btn blueLt p-x-md" ng-click="save()">确认修改</button>
                        <button type="button" class="btn dark-white p-x-md" ng-click="cancelModal()">关闭</button>
                  </div>
            </script>
            <!-- modal end -->

            <!--editQtyModal modal -->
            <script type="text/ng-template" id="editQtyModal.html">
                <div class="modal-header blueLt">
                    <h3 class="modal-title">变更数量</h3>
                </div>
                <div class="modal-body text-center p-lg">
                    <div class="row m-t">
                        <div class="col-md-2 th-nh">产品编码</div>
                        <div class="col-md-2 th-nh">产品简称</div>
                        <div class="col-md-2 th-nh">原数量</div>
                        <div class="col-md-2 th-nh">新数量</div>
                        <div class="col-md-4 th-nh">有效日期</div>
                    </div>
                    <div class="row m-b">
                        <div class="col-md-2" style="line-height: 2.4rem;">
                            <span ng-bind="qtyInfo.matnr.slice(-8)"></span>
                        </div>
                        <div class="col-md-2" style="line-height: 2.4rem;"><span ng-bind="qtyInfo.shortTxt"></span></div>
                        <div class="col-md-2" style="line-height: 2.4rem;"><span ng-bind="qtyInfo.qty"></span></div>
                        <div class="col-md-2">
                            <input type="number" min=1 class="form-control" ng-model="newQty">
                        </div>
                        <div class="col-md-4">
                            <div class="select-date" style="width: 45%;display: inline-block;">
                                <input type="text" class="form-control"
                                   ng-model="qtyInfo.startDispDate"
                                   data-min-date="{{startDate}}"
                                   data-max-date="{{endDate}}"
                                   data-autoclose="true" 
                                   data-date-format="yyyy-MM-dd"
                                   data-date-type="string"
                                   bs-datepicker>
                            </div>
                            <span>到</span>
                            <div class="select-date" style="width: 45%;display: inline-block;">
                                <input ng-disabled="orderDetail.order.paymentmethod == '20'" type="text" class="form-control"
                                   ng-model="qtyInfo.endDispDate"
                                   data-min-date="{{startDate}}"
                                   data-max-date="{{endDate}}"
                                   data-autoclose="true"
                                   data-date-format="yyyy-MM-dd"
                                   data-date-type="string"
                                   bs-datepicker>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn blueLt p-x-md" ng-click="save()">确认</button>
                    <button type="button" class="btn primary p-x-md" ng-click="cancelModal()">关闭</button>
                </div>
            </script>
            <!-- modal end -->

            <!--editDeliveryModal modal -->
            <script type="text/ng-template" id="editDeliveryModal.html">
                <div class="modal-header blueLt">
                    <h3 class="modal-title">变更配送规律</h3>
                </div>
                <div class="modal-body p-lg">
                    <div class="box-body">
                        <div class="row text">
                            <div class="col-md-4">
                                <span class="_600" style="color: #2196f3;">产品编码</span>
                                <span class="m-l-sm" ng-bind="qtyInfo.matnr.slice(-8)"></span>
                            </div>
                            <div class="col-md-8">
                                <span class="_600" style="color: #2196f3;">产品简称</span>
                                <span class="m-l-sm" ng-bind="qtyInfo.shortTxt"></span>
                            </div>
                        </div>
                        <div class="row m-t m-b">
                            <div class="col-md-4">送奶计划</div>
                            <div class="col-md-8">送奶时间</div>
                        </div>
                        <div class="row" style="height: 15rem;">
                            <div class="col-md-4">
                                <div class="b-b nav-active-bg">
                                    <ul class="nav nav-tabs" ng-if="qtyInfo.ruleType=='10'">
                                        <li class="nav-item">
                                            <a class="nav-link active" data-target="#tab{{qtyInfo.itemNo}}a" data-toggle="tab" href="" aria-expanded="true"
                                            ng-click="changeDeliveryType(qtyInfo.itemNo,0)">按周期送
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" data-target="#tab{{qtyInfo.itemNo}}b" data-toggle="tab" href="" aria-expanded="false"
                                            ng-click="changeDeliveryType(qtyInfo.itemNo,1)">按星期送
                                            </a>
                                        </li>
                                    </ul>
                                    <ul class="nav nav-tabs" ng-if="qtyInfo.ruleType=='20'">
                                        <li class="nav-item">
                                            <a class="nav-link" data-target="#tab{{qtyInfo.itemNo}}a" data-toggle="tab" href="" aria-expanded="true"
                                            ng-click="changeDeliveryType(qtyInfo.itemNo,0)">按周期送
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link active" data-target="#tab{{qtyInfo.itemNo}}b" data-toggle="tab" href="" aria-expanded="false"
                                            ng-click="changeDeliveryType(qtyInfo.itemNo,1)">按星期送
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="form-group tab-content p-a m-b-md" style="border:solid 2px black;" ng-if="qtyInfo.ruleType=='10'">
                                    <div id="tab{{qtyInfo.itemNo}}a" class="tab-pane animated fadeIn text-muted active" aria-expanded="true">
                                        <div class="row">
                                            间隔天数 &nbsp
                                            <input class="inline" type="number" ng-model="qtyInfo.gapDays" min=0>
                                        </div>
                                    </div>
                                    <div id="tab{{qtyInfo.itemNo}}b" class="tab-pane animated fadeIn text-muted" aria-expanded="false">
                                        <div class="row">
                                            <div class="col-md-6"><input name="{{qtyInfo.itemNo}}" type="checkbox" ng-model="qtyInfo.sendByWeeks.mon">&nbsp&nbsp周一</div>
                                            <div class="col-md-6"><input name="{{qtyInfo.itemNo}}" type="checkbox" ng-model="qtyInfo.sendByWeeks.tue">&nbsp&nbsp周二</div>
                                        </div>
                                        <br>
                                        <div class="row">
                                            <div class="col-md-6"><input name="{{qtyInfo.itemNo}}" type="checkbox" ng-model="qtyInfo.sendByWeeks.wed">&nbsp&nbsp周三</div>
                                            <div class="col-md-6"><input name="{{qtyInfo.itemNo}}" type="checkbox" ng-model="qtyInfo.sendByWeeks.tur">&nbsp&nbsp周四</div>
                                        </div>
                                        <br>
                                        <div class="row">
                                            <div class="col-md-6"><input name="{{qtyInfo.itemNo}}" type="checkbox" ng-model="qtyInfo.sendByWeeks.fri">&nbsp&nbsp周五</div>
                                            <div class="col-md-6"><input name="{{qtyInfo.itemNo}}" type="checkbox" ng-model="qtyInfo.sendByWeeks.sat">&nbsp&nbsp周六</div>
                                        </div>
                                        <br>
                                        <div class="row">
                                            <div class="col-md-6"><input name="{{qtyInfo.itemNo}}" type="checkbox" ng-model="qtyInfo.sendByWeeks.sun">&nbsp&nbsp周日</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group tab-content p-a m-b-md" style ="border:solid 2px black;" ng-if="qtyInfo.ruleType=='20'">
                                    <div id="tab{{qtyInfo.itemNo}}a" class="tab-pane animated fadeIn text-muted" aria-expanded="false">
                                        <div>
                                            间隔天数 &nbsp
                                            <input class="inline" type="number" ng-model="qtyInfo.gapDays" min=0>
                                        </div>
                                        
                                    </div>
                                    <div id="tab{{qtyInfo.itemNo}}b" class="tab-pane animated fadeIn text-muted active" aria-expanded="true">
                                        <div class="row">
                                            <div class="col-md-6"><input name="{{qtyInfo.itemNo}}" type="checkbox" ng-model="qtyInfo.sendByWeeks.mon">&nbsp&nbsp周一</div>
                                            <div class="col-md-6"><input name="{{qtyInfo.itemNo}}" type="checkbox" ng-model="qtyInfo.sendByWeeks.tue">&nbsp&nbsp周二</div>
                                        </div>
                                        <br>
                                        <div class="row">
                                            <div class="col-md-6"><input name="{{qtyInfo.itemNo}}" type="checkbox" ng-model="qtyInfo.sendByWeeks.wed">&nbsp&nbsp周三</div>
                                            <div class="col-md-6"><input name="{{qtyInfo.itemNo}}" type="checkbox" ng-model="qtyInfo.sendByWeeks.tur">&nbsp&nbsp周四</div>
                                        </div>
                                        <br>
                                        <div class="row">
                                            <div class="col-md-6"><input name="{{qtyInfo.itemNo}}" type="checkbox" ng-model="qtyInfo.sendByWeeks.fri">&nbsp&nbsp周五</div>
                                            <div class="col-md-6"><input name="{{qtyInfo.itemNo}}" type="checkbox" ng-model="qtyInfo.sendByWeeks.sat">&nbsp&nbsp周六</div>
                                        </div>
                                        <br>
                                        <div class="row">
                                            <div class="col-md-6"><input name="{{qtyInfo.itemNo}}" type="checkbox" ng-model="qtyInfo.sendByWeeks.sun">&nbsp&nbsp周日</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-8">
                                <div class="row">
                                    <div class="col-md-4">
                                        <ui-select ng-model="qtyInfo.reachTimeType" remove-selected="false" search-enabled="false">
                                            <ui-select-match allow-clear="false">
                                                <span ng-bind="$select.selected.text"></span>
                                            </ui-select-match>
                                            <ui-select-choices repeat="x.code as x in (deliveryTime.data | filter: $select.search) track by x.code">
                                                <span ng-bind="x.text"></span>
                                            </ui-select-choices>
                                        </ui-select>
                                    </div>
                                </div>
                                <div class="row m-t-lg">
                                    <div class="col-md-12">
                                        <div class="m-b">有效日期</div>
                                        <div class="select-date" style="width: 45%;display: inline-block;">
                                            <input type="text" class="form-control"
                                               ng-model="qtyInfo.startDispDate"
                                               data-min-date="{{startDate}}"
                                               data-max-date="{{endDate}}"
                                               data-autoclose="true"
                                               data-date-type="date"
                                               bs-datepicker>
                                            <i class="material-icons md-24">&#xe8df;</i>
                                        </div>
                                        <span>到</span>
                                        <div class="select-date" style="width: 45%;display: inline-block;">
                                            <input ng-disabled="orderDetail.order.paymentmethod == '20'" type="text" class="form-control"
                                               ng-model="qtyInfo.endDispDate"
                                               data-min-date="{{startDate}}"
                                               data-autoclose="true"
                                               data-date-type="date"
                                               name="endDate"
                                               bs-datepicker>
                                            <i class="material-icons md-24">&#xe8df;</i>
                                        </div>
                                    </div>
                                </div>
                                
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn blueLt p-x-md" ng-click="save()">确认</button>
                    <button type="button" class="btn primary p-x-md" ng-click="cancelModal()">关闭</button>
                </div>
            </script>
            <!-- modal end -->

            <!--stopOrderModal modal -->
            <script type="text/ng-template" id="stopOrderModal.html">
                <div class="modal-header blueLt">
                    <h3 class="modal-title">停订产品</h3>
                </div>
                <div class="modal-body text-center p-lg">
                    <div class="box-body">
                        <div class="row m-b">
                            <div class="col-md-2 text-md blueWt">产品编码</div>
                            <div class="col-md-3 text-md blueWt">产品简称</div>
                            <div class="col-md-5 text-md blueWt">停订开始时间</div>
                        </div>
                        <div class="row">
                            <div class="col-md-2" style="line-height: 2.25rem;">
                                <span ng-bind="qtyInfo.matnr.slice(-8)"></span>
                            </div>
                            <div class="col-md-3" style="line-height: 2.25rem;"><span ng-bind="qtyInfo.shortTxt"></span></div>
                            <div class="col-md-5">
                                <div class="select-date">
                                    <input type="text" class="form-control"
                                       ng-model="qtyInfo.stopStartDate"
                                       data-min-date="{{minStartDate}}"
                                       data-autoclose="true"
                                       data-date-type="date"
                                       name="startDate"
                                       bs-datepicker>
                                    <i class="material-icons md-24">&#xe8df;</i>
                                </div>
                                <!-- <span>到</span>
                                <div class="select-date" style="width: 45%;display: inline-block;">
                                    <input ng-disabled="orderDetail.order.paymentmethod == '20'" type="text" class="form-control"
                                       ng-model="qtyInfo.stopEndDate"
                                       data-min-date="{{qtyInfo.stopStartDate}}"
                                       data-max-date="{{qtyInfo.endDispDate}}"
                                       data-date-type="date"
                                       data-autoclose="true"
                                       name="endDate"
                                       bs-datepicker>
                                    <i class="material-icons md-24">&#xe8df;</i>
                                </div> -->
                            </div>
                            <!-- <div class="col-md-2">
                                <input type="checkbox" ng-model="isStop">&nbsp续订
                            </div> -->
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn blueLt p-x-md" ng-click="save()">确认</button>
                    <button type="button" class="btn primary p-x-md" ng-click="cancelModal()">关闭</button>
                </div>
            </script>
            <!-- modal end -->

            <!--editQtyModal modal -->
            <script type="text/ng-template" id="removeProductModal.html">
                <div class="modal-header blueLt">
                    <h3 class="modal-title">删除产品</h3>
                </div>
                <div class="modal-body p-lg">
                    <div class="box-body">
                        是否删除该产品及订奶计划？
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn blueLt p-x-md" ng-click="save()">确认</button>
                    <button type="button" class="btn primary p-x-md" ng-click="cancelModal()">关闭</button>
                </div>
            </script>
            <!-- modal end -->

             <!--editQtyModal modal -->
            <script type="text/ng-template" id="editDelivDateModel.html">
                <div class="modal-header blueLt">
                    <h3 class="modal-title">变更配送日期</h3>
                </div>
                <div class="modal-body text-center p-lg">
                    <div class="box-body">
                        <div class="row">
                            <div class="col-md-3 th-nh">订单起始日期</div>
                            <div class="col-md-3 th-nh">{{earliestDate}}</div>
                            <div class="col-md-3 th-nh">提前天数</div>
                            <div class="col-md-3 th-nh">
                                 <input type="number"  class="form-control" ng-model="advanceDays">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn blueLt p-x-md" ng-click="save()">确认</button>
                    <button type="button" class="btn primary p-x-md" ng-click="cancelModal()">关闭</button>
                </div>
            </script>
            <!-- modal end -->

            <!--viewPlans modal -->
            <script type="text/ng-template" id="showPlansModal.html">
                  <div class="modal-header blueLt">
                        <h3 class="modal-title">查看计划</h3>
                  </div>
                  <div class="modal-body p-lg">
                    <div style="margin-right: 17px">
                        <table class="table table-striped b-t b-b no-footer" style="margin-bottom: 0;">
                            <thead>
                                <tr role="row">
                                    <th class="th-nh" style="width: 18%">配送日期</th>
                                    <th class="th-nh" style="width: 42%">产品名称</th>
                                    <th class="th-nh" style="width: 16%">订单余额</th>
                                    <th class="th-nh" style="width: 10%">数量</th>
                                    <th class="th-nh" style="width: 30%">配送时间</th>
                                </tr>
                            </thead>
                        </table>
                      </div>
                      <div style="height: 520px; overflow-y: auto;">
                        <table class="table table-striped b-t b-b no-footer">
                            <tbody>
                                <tr ng-repeat="item in planList">
                                    <td class="td-id-nh" ng-bind-html="dateFormat(item.dispDate)" style="width: 17.8%">
                                    </td>
                                    <td style="width: 43.5%">{{item.matnrTxt}}</td>
                                    <td style="width: 16%" ng-if="'30'==item.status">__</td>
                                    <td style="width: 16%" ng-if="'30'!=item.status">{{item.remainAmt}}</td>
                                    <td style="width: 10%">{{item.qty}}</td>
                                    <td ng-bind-html="statusFormat(item.reachTimeType)" style="width: 20%"></td>
                                </tr>
                            </tbody>
                        </table>
                      </div>
                  </div>
                  <div class="modal-footer">
                        <button type="button" class="btn primary p-x-md" ng-click="cancelModal()">关闭</button>
                  </div>
            </script>
            <!-- modal end -->
            

</div>



            <!-- #####  右侧正文结束-->

<!-- ######## 右侧结束-->
<!-- ############ 页面内容结束-->
